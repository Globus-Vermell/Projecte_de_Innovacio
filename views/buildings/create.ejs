<!DOCTYPE html>
<html lang="ca">

<head>
    <%- include('../partials/head', { title: 'Nova edificació' , cssType: 'form' }) %>
</head>

<body>

    <%- include('../partials/headerForm', { backUrl: '/buildings' , title: 'Afegir una nova edificació' }) %>

        <main class="flex-container">
            <section class="form-container">
                <form id="main-form" enctype="multipart/form-data">
                    <div class="top-section">
                        <div class="fields-column">
                            <div class="form-group">
                                <label for="name">Nom: <span class="required">*</span></label>
                                <input type="text" id="name" name="name" required />
                            </div>
                            <div class="form-group">
                                <label for="address">Adreça: <span class="required">*</span></label>
                                <input type="text" id="address" name="address" required />
                            </div>
                            <div class="form-group">
                                <label for="coordinates">Coordenades: <span class="required">*</span></label>
                                <input type="text" id="coordinates" name="coordinates" required />
                            </div>
                            <div class="form-group">
                                <label for="construction_year">Any construcció: <span class="required">*</span></label>
                                <input type="number" id="construction_year" name="construction_year" required />
                            </div>
                        </div>

                        <div class="fields-column">
                            <div class="form-group">
                                <label for="publications">Publicació: <span class="required">*</span></label>
                                <select id="publications" name="publications" multiple>
                                    <% if (publications && publications.length> 0) { %>
                                        <% publications.forEach(pub=> { %>
                                            <option value="<%= pub.id_publication %>">
                                                <%= pub.title %>
                                            </option>
                                            <% }) %>
                                                <% } %>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="architects">Arquitectes:</label>
                                <select id="architects" name="architects" multiple>
                                    <% if (architects && architects.length> 0) { %>
                                        <% architects.forEach(arq=> { %>
                                            <option value="<%= arq.id_architect %>">
                                                <%= arq.name %>
                                            </option>
                                            <% }) %>
                                                <% } %>
                                </select>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="protection">Protecció:</label>
                                    <select id="protection" name="protection">
                                        <option value="">-- Cap --</option>
                                        <% if (protections && protections.length> 0) { %>
                                            <% protections.forEach(p=> { %>
                                                <option value="<%= p.id_protection %>">
                                                    <%= p.level %>
                                                </option>
                                                <% }) %>
                                                    <% } %>
                                    </select>
                                </div>
                                <div class="form-group" id="typologies-container" style="display:none;">
                                    <label for="typologies">Tipologia:</label>
                                    <select id="typologies" name="typologies">
                                        <option value="">-- Selecciona una tipologia --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="reforms">Reformes:</label>
                                <select id="reforms" name="reforms" multiple>
                                    <% if (reforms && reforms.length> 0) { %>
                                        <% reforms.forEach(reform=> { %>
                                            <option value="<%= reform.id_reform %>">
                                                <%= reform.year %> - <%= reform.architects?.name %>
                                            </option>
                                            <% }) %>
                                                <% } %>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="prizes">Premis:</label>
                                <select id="prizes" name="prizes" multiple>
                                    <% if (prizes && prizes.length> 0) { %>
                                        <% prizes.forEach(prize=> { %>
                                            <option value="<%= prize.id_prize %>">
                                                <%= prize.name %> (<%= prize.year %>)
                                            </option>
                                            <% }) %>
                                                <% } %>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="picture">Imatge:</label>
                        <input type="file" id="picture" name="picture" multiple accept="image/*" />
                    </div>
                    <div class="form-group">
                        <label for="surface_area">Superfície (m²):</label>
                        <input type="number" id="surface_area" name="surface_area" />
                    </div>
                    <div class="form-group">
                        <label for="description">Descripció:</label>
                        <textarea id="description" name="description"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Descripcions Extra:</label>
                        <div id="descriptions-container"></div>
                        <button type="button" id="button-add-description" class="add-description-button">
                            <i class="fas fa-plus"></i> Afegir descripció
                        </button>
                    </div>
                </form>
            </section>
        </main>
        <script src="/scripts/buildings/create.js"></script>
        <script src="/scripts/MultiSelect.js"></script>
</body>

</html>